{"componentChunkName":"component---node-modules-pauliescanlon-gatsby-theme-terminal-src-layouts-source-layout-js","path":"/posts/2020/11/gatsby-netlify-twitter/","result":{"data":{"mdx":{"id":"a3685e0b-9bdc-55bc-b97d-6d7ef31522bd","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Use Netlify Functions and the Twitter API v2 as a CMS for your Gatsby blog\",\n  \"tags\": [\"JavaScript\", \"React\", \"Gatsby\", \"Netlify Functions\", \"Twitter API v2\"],\n  \"date\": \"2020-11-17T00:00:00.000Z\",\n  \"author\": \"Paul Scanlon\",\n  \"featuredImageUrl\": \"https://res.cloudinary.com/www-paulie-dev/image/upload/v1605613346/paulie.dev/2020/11/gatsby-netlify-twitterjpg_ok1k0q.jpg\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Divider = makeShortcode(\"Divider\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Apologies in advance for the rather long-winded blog title but as it suggests in this post i'm going to explain how you\\ncan use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.netlify.com/products/functions/\"\n  }), \"Netlify Functions\"), \" to access your Twitter profile data using the\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.twitter.com/en/docs/twitter-api/early-access\"\n  }), \"Twitter v2 API\"), \" and display it on your Gatsby blog.\"), mdx(\"h2\", null, \"A rather unique requirement\"), mdx(\"p\", null, \"This might be a specific to me but I wanted to solve a little problem I was having with my \\\"digital footprint\\\". As you\\ncan see I have this blog: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://paulie.dev/\"\n  }), \"https://paulie.dev\"), \" and a commercial portfolio:\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.pauliescanlon.io/\"\n  }), \"https://www.pauliescanlon.io\")), mdx(\"p\", null, \"Both sites are built on top of my Gatsby theme: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gatsby-theme-terminal.netlify.app/\"\n  }), \"gatsby-theme-terminal\"), \"\\nwhich is Open source and can be found on my \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/PaulieScanlon/gatsby-theme-terminal\"\n  }), \"GitHub\")), mdx(\"p\", null, \"Using a Gatsby Theme solves one of my issues as I'm able to have two sites that look and work pretty much the same way\\nand any changes I make to the theme are inherited by both my sites. It's kind of like managing your own multi brand\\ndesign system, but just for yourself.\"), mdx(\"p\", null, \"There was one other problem though. \\uD83E\\uDD14\"), mdx(\"p\", null, \"I wanted both sites to have the same \\\"intro\\\" section, but every time I made a change to one I had to make the same\\nchange to the other site to ensure they were both displaying the same intro text.\"), mdx(\"p\", null, \"This might be fine if I weren't a developer but doing something twice is one time too many IMO.\"), mdx(\"p\", null, \"It was also a little frustrating because I also wanted my Twitter profile description to be in sync with both the sites\\nso, again another place to remember to update my personal blurb.\"), mdx(\"p\", null, \"One option I considered would have been to hook up a Content Management System, and this would have been fine and it\\nwould have kept both my sites in sync but it wouldn't have been able to update my Twitter profile blurb...\"), mdx(\"p\", null, \"So, I've decided to reverse engineer the Twitter API and use that as a CMS to populate both my sites. The idea is quite\\nsimple. I'll use the Twitter profile description as though it were a field from a CMS. Naturally any changes I make to\\nthis will appear on my Twitter profile and below is how I pull that same info into both of my sites.\"), mdx(\"h2\", null, \"Demo\"), mdx(\"p\", null, \"Here's what I'll be showing you how to build:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"App / API \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://gatsby-netlify-twitter.netlify.app/\"\n  }), \"https://gatsby-netlify-twitter.netlify.app\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"GitHub repo\\n\", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/PaulieScanlon/gatsby-netlify-twitter\"\n  }), \"https://github.com/PaulieScanlon/gatsby-netlify-twitter\"))), mdx(\"p\", null, \"... but the actual API I use for my blog and site is here:\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://paulie-api.netlify.app/\"\n  }), \"https://paulie-api.netlify.app\")), mdx(\"h2\", null, \"Tech\"), mdx(\"h3\", null, \"Netlify Functions\"), mdx(\"p\", null, \"\\\"Power your site without managing servers\\\" is how Netlify describe Functions and for all intents and purposes thats\\nexactly what they are. Similar to how you might create an \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://expressjs.com/\"\n  }), \"Express\"), \" app and deploy it somewhere\\nbut without the hassle of having to setup server side environments and more crucially any really dweeby server uptime\\nmonitoring.\"), mdx(\"h3\", null, \"Twitter API v2\"), mdx(\"p\", null, \"A set of endpoints that can be used to get data from Twitter. Any Twitter requests must be done server side and use a\\nset of keys and tokens. You can't unfortunately hit the Twitter API from the browser so we need a \\\"server\\\" or as\\nmentioned above, a Netlify Function\"), mdx(\"p\", null, \"Using both of the above i've made my own API endpoint which goes off and hits the Twitter API and returns my Profile\\ninformation which I can then display in the intro section of my blog and site. I've deployed this API to Netlify and\\nit's completely de-coupled from either of my sites but will return data which can be fetched from client side \\\"fetch\\\"\\nrequest from within my site and blog. That url again is here:\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://paulie-api.netlify.app/\"\n  }), \"https://paulie-api.netlify.app\")), mdx(\"h2\", null, \"Before we start\"), mdx(\"p\", null, \"Before we get started there's a couple of things you'll need to have in place.\"), mdx(\"h3\", null, \"Twitter API v2\"), mdx(\"p\", null, \"Apply for access to the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.twitter.com/en/products/twitter-api\"\n  }), \"Twitter API\"), \". This is quite a lengthy\\nprocess so strap in and also bookmark this post as it might take a few days for Twitter to accept your application.\"), mdx(\"p\", null, \"Once you have access you can head over to the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.twitter.com/en/portal/dashboard\"\n  }), \"Developer Portal\"), \" and\\ncreate a new project, and within the project you can create an \\\"app\\\", I called mine \\\"paulie-api\\\".\"), mdx(\"p\", null, \"In here you'll find all the API keys and tokens required to access the Twitter API. Make a note of them somewhere as\\nwe'll be using them later.\"), mdx(\"h3\", null, \"Netlify CLI\"), mdx(\"p\", null, \"To run Netlify Functions we'll be using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"netlify dev\"), \" rather than \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby develop\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"yarn develop\"), \" so you'll need to\\ninstall the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.netlify.com/cli/get-started/\"\n  }), \"Netlify CLI\")), mdx(\"h2\", null, \"The Build\"), mdx(\"p\", null, \"In order to develop you own API I found it easiest to have some kind of \\\"site\\\" running at the same time which will\\naccess the API endpoint and render the response on the page. In the demo repo you'll see i've set up a really simple\\nGatsby Site with one page that uses \\\"fetch\\\" to, er fetch and then render the data.\"), mdx(\"p\", null, \"I've used \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://theme-ui.com/home\"\n  }), \"Theme UI\"), \" for the style but naturally you can choose whatever you like to do this.\"), mdx(\"p\", null, \"Whether you're starting from scratch or adding Netlify Functions to an existing project you'll need to start by adding a\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"functions\"), \" dir to the root of your project.\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"|-- functions\\n  |-- package.json\\n|-- src\\npackage.json\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"functions\"), \" is kind of it's own application so it'll need it's own \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" and will have one dependency on\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/HunterLarco/twitter-v2\"\n  }), \"twitter-v2\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"// ./functions/package.json\\n\\n{\\n  \\\"name\\\": \\\"gatsby-netlify-twitter-api\\\",\\n  \\\"version\\\": \\\"1.0.0\\\",\\n  \\\"description\\\": \\\"An api for the Twitter v2 api\\\",\\n  \\\"main\\\": \\\"index.js\\\",\\n  \\\"scripts\\\": {\\n    \\\"test\\\": \\\"echo \\\\\\\"Error: no test specified\\\\\\\" && exit 1\\\"\\n  },\\n  \\\"keywords\\\": [],\\n  \\\"author\\\": \\\"\\\",\\n  \\\"license\\\": \\\"ISC\\\",\\n  \\\"dependencies\\\": {\\n    \\\"twitter-v2\\\": \\\"^0.1.2\\\"\\n  }\\n}\\n\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"Next have a look at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/PaulieScanlon/gatsby-netlify-twitter/blob/main/.env.example\"\n  }), \".env.example\"), \".\\nYou'll need to create your own \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env\"), \" file and add the environment variables as seen in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env.example\"), \". Naturally\\nyou'll want to change the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GATSBY_TWITTER_USERNAME\"), \" to your own Twitter username and the Twitter keys and tokens will be\\nwhat I referenced earlier which are provided by the Twitter Developer Portal\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"// ./.env\\n\\nGATSBY_API_URL=./.netlify/functions\\nGATSBY_TWITTER_USERNAME=\\n\\nTWITTER_API_KEY=\\nTWITTER_API_KEY_SECRET=\\nTWITTER_ACCESS_TOKEN=\\nTWITTER_ACCESS_TOKEN_SECRET=\\n\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"Next create a Twitter client, this is what we'll use to pass the keys and tokens onto the Twitter API when we make a\\nrequest\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"// ./functions/client.js\\n\\nconst Twitter = require('twitter-v2')\\n\\nmodule.exports = {\\n  client: new Twitter({\\n    consumer_key: process.env.TWITTER_CONSUMER_KEY,\\n    consumer_secret: process.env.TWITTER_CONSUMER_KEY_SECRET,\\n    access_token: process.env.TWITTER_ACCESS_TOKEN,\\n    access_token_secret: process.env.TWITTER_ACCESS_TOKEN_SECRET,\\n  }),\\n}\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"You should now be looking at something similar to the below\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"...\\n|-- functions\\n  |-- client.js\\n  |-- package.json\\n|-- src\\npackage.json\\n.env\\n...\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"Now we need to create the \\\"endpoint\\\" that our frontend will hit, which in turn goes off and grabs the data from the\\nTwitter API.\"), mdx(\"p\", null, \"I created a dir called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"twitter-user\"), \" and inside I create a new file and called it \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"twitter-user.js\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"...\\n|-- functions\\n  |-- client.js\\n  |-- twitter-user\\n    |-- twitter-user.js\\n  |-- package.json\\n|-- src\\npackage.json\\n.env\\n...\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"It's in here where we can use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"client.js\"), \" to hit a Twitter API endpoint and pass with it the required keys and\\ntokens from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"client\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"// ./functions/twitter-user/twitter-user.js\\n\\nconst { client } = require('../client')\\n\\nexports.handler = async (event, context, callback) => {\\n  const { data } = await client.get(`users/by/username/${process.env.GATSBY_TWITTER_USERNAME}`, {\\n    user: {\\n      fields:\\n        'created_at,description,entities,id,location,name,pinned_tweet_id,profile_image_url,protected,public_metrics,url,username,verified,withheld',\\n    },\\n  })\\n\\n  callback(null, {\\n    headers: {\\n      'Access-Control-Allow-Origin': '*',\\n    },\\n    statusCode: 200,\\n    body: JSON.stringify({ user: data }),\\n  })\\n}\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"In the above you can see we use our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"client\"), \" to hit the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"users/by/username\"), \" Twitter API endpoint which you can read more\\nabout \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.twitter.com/en/docs/twitter-api/users/lookup/introduction\"\n  }), \"here\"), \", which returns a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"data\"), \" object\\nwhich I pass on to the callback body as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"{ user: data }\")), mdx(\"p\", null, \"This is the object that'll we receive in our frontend\"), mdx(\"p\", null, \"The next bit will greatly depend on how you've set up your frontend but in the\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/PaulieScanlon/gatsby-netlify-twitter/blob/main/src/pages/index.js\"\n  }), \"Demo\"), \" I have one \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"page\"), \" called\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.js\"), \" which uses a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \" to \\\"fetch\\\" the data from the Netlify Function.\"), mdx(\"p\", null, \"The example file contains a few extra bits for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isLoading\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"hasError\"), \" but the below should be enough to allow you\\nhit to the Netlify Function which in turn hits the Twitter API and returns your profile information data.\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"// ./src/pages/index.js\\n\\nimport React, { useState } from 'react'\\n\\nconst IndexPage = () => {\\n  const [response, setResponse] = useState({ user: null })\\n\\n  useEffect(() => {\\n    fetch(`${process.env.GATSBY_API_URL}/twitter-user`)\\n      .then((response) => response.json())\\n      .then((response) => {\\n        setResponse({ user: response.user })\\n      })\\n      .catch((error) => {\\n        console.error({ error })\\n      })\\n  }, [])\\n\\n  return (\\n    <pre>\\n      <code>{JSON.stringify(response.user, null, 2)}</code>\\n    </pre>\\n  )\\n}\\n\\nexport default IndexPage\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"process.env.GATSBY_API_URL\"), \" is the path to the Netlify Function we added earlier to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env\"), \" and i've hard-coded\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/twitter-user\"), \" in the component / page as you might want to create different endpoints that return different data on\\ndifferent pages.\"), mdx(\"p\", null, \"You might be wondering why this environment variable is prefixed with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GATSBY_\"), \". This is so Gatsby can access it from\\nthe frontend. You can read more about Gatsby environment variables\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.com/docs/environment-variables/#client-side-javascript\"\n  }), \"here\")), mdx(\"h3\", null, \"IMPORTANT\"), mdx(\"p\", null, \"In order for Netlify Functions to work both locally and when deployed we need to ensure we've got \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"netlify-lambda\"), \"\\ninstalled and have added both a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"start\\\"\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"postinstall\\\"\"), \" script to the root \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" (not the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \"\\nin \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./functions\"), \")\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"npm install netlify-lambda --save -dev\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-diff\"\n  }), \"// ./package.json\\n\\n...\\n  \\\"scripts\\\": {\\n    \\\"develop\\\": \\\"gatsby develop\\\",\\n    \\\"build\\\": \\\"gatsby build\\\",\\n    \\\"clean\\\": \\\"gatsby clean\\\",\\n    \\\"serve\\\": \\\"gatsby serve\\\",\\n+    \\\"start\\\": \\\"npm run develop\\\",\\n+    \\\"postinstall\\\": \\\"netlify-lambda install\\\"\\n  },\\n   \\\"devDependencies\\\": {\\n+   \\\"netlify-lambda\\\": \\\"^1.6.3\\\",\\n  }\\n...\\n\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"Before we get too carried away, it's important to note that we'll no longer be using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby develop\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"yarn develop\"), \"\\nto start the Gatsby app, if you do that our Netlify Function won't be running and you'll get an error.\"), mdx(\"p\", null, \"Instead, run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"netlify dev\"), \" this is so both the Gatsby site and the Netlify Function are run at the same time.\"), mdx(\"p\", null, \"Instead of visiting the usual \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:8000/\"), \" we'll now be visiting \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:8888/\")), mdx(\"p\", null, \"And to ensure when we deploy everything works as it should you'll need to modify your\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/PaulieScanlon/gatsby-netlify-twitter/blob/main/netlify.toml\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"netlify.toml\"))), mdx(\"p\", null, \"For the most part \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"netlify dev\"), \" will attempt to automatically determine which static site generator you're using by\\nlooking for certain files in the project root. If you don't already have a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-config.js\"), \" at the root of your\\nproject add one as i've done\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/PaulieScanlon/gatsby-netlify-twitter/blob/main/gatsby-config.js\"\n  }), \"here\"), \"... you might not want to use\\nTheme UI so ignore that if you're using some other CSS method.\"), mdx(\"p\", null, \"As mentioned above Netlify Functions are kind of their own application so when you deploy this to Netlify we need to\\nensure that the dependencies get installed, and you tell Netlify where the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"functions\"), \" are in the directory structure\"), mdx(\"p\", null, \"You'll also need to ensue you've added all the same \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env\"), \" variables to the Netlify environment. Have a look in your\\nSite settings and find \\\"Environment\\\" under \\\"Build & Deploy\\\"\"), mdx(\"p\", null, \"Also make sure you've correctly set the \\\"Sensitive variable policy\\\" I just set mine as \\\"Deploy without restrictions\\\"\\nbecause i'm edgy!\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-diff\"\n  }), \"// ./netlify.toml\\n\\n[build]\\n-  command = \\\"yarn build\\\"\\n+  command = \\\"yarn build && cd functions && yarn\\\"\\n+  functions = \\\"functions\\\"\\n  publish = \\\"public/\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"With all that set you should be able to run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"netlify dev\"), \" visit \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:8888/\"), \" and see your own Twitter data\\nrendered on the page, and once you deploy you \\\"should\\\" find everything continues to work as it did locally.\"), mdx(\"p\", null, \"I'm not 100% on this but I think you might have to deploy at least once just so \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"netlify dev\"), \" knows where the functions\\nare... it's a bit weird even though you're developing locally, however it seems to error until you deploy at least once.\"), mdx(\"p\", null, \"Fingers crossed this is enough to get you up and running with Netlify Functions, but if you feel like any of this is a\\nbit \\\"\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.reddit.com/r/restofthefuckingowl/\"\n  }), \"draw the rest of the fucking owl\"), \"\\\" feel free to find me on Twitter.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Apologies in advance for the rather long-winded blog title but as it suggests in this post i'm going to explain how you\ncan use  Netlifyâ€¦","timeToRead":6,"wordCount":{"words":1566},"slug":"2020/11/gatsby-netlify-twitter","frontmatter":{"title":"Use Netlify Functions and the Twitter API v2 as a CMS for your Gatsby blog","tags":["JavaScript","React","Gatsby","Netlify Functions","Twitter API v2"],"date":"2020-11-17T00:00:00.000Z","dateModified":null,"author":"Paul Scanlon","status":null,"isPrivate":null,"url":null,"misc":null,"pinned":null,"featuredImage":null,"embeddedImages":null},"featuredImageUrl":{"url":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABgADBf/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/9oADAMBAAIQAxAAAAHtE2gJRQWdUkf/xAAbEAACAgMBAAAAAAAAAAAAAAACBAEDAAUzNP/aAAgBAQABBQJ2wpWXrEWDGBLYeBTtn//EABcRAAMBAAAAAAAAAAAAAAAAAAEDEDL/2gAIAQMBAT8Bdgz/xAAXEQADAQAAAAAAAAAAAAAAAAABAxAy/9oACAECAQE/AVbE/8QAIBAAAgECBwEAAAAAAAAAAAAAAQIAAxIEEBEyYXKBkf/aAAgBAQAGPwLEJYQAm6KBUDXL8mga7mVus8y//8QAHBABAAEEAwAAAAAAAAAAAAAAAQAQETGxQVGh/9oACAEBAAE/IWUzJ2hma6pvGZgcMT0Zv0//2gAMAwEAAgADAAAAEBgf/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARgf/aAAgBAwEBPxBnCUXS/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEhEf/aAAgBAgEBPxCsJRRYz//EAB4QAAIBBAMBAAAAAAAAAAAAAAERIQAQMXFBUZHw/9oACAEBAAE/EDRwkYOIVK7w8oiRGnuqQc0GEipXYfNj5/jFv//Z"},"images":{"fallback":{"src":"/static/32d8216c2e5972f0f318876ac5b83416/ccd19/gatsby-netlify-twitterjpg_ok1k0q.jpg","srcSet":"/static/32d8216c2e5972f0f318876ac5b83416/5de87/gatsby-netlify-twitterjpg_ok1k0q.jpg 750w,\n/static/32d8216c2e5972f0f318876ac5b83416/ccd19/gatsby-netlify-twitterjpg_ok1k0q.jpg 1024w","sizes":"100vw"},"sources":[{"srcSet":"/static/32d8216c2e5972f0f318876ac5b83416/5846e/gatsby-netlify-twitterjpg_ok1k0q.avif 750w,\n/static/32d8216c2e5972f0f318876ac5b83416/47b7d/gatsby-netlify-twitterjpg_ok1k0q.avif 1024w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/32d8216c2e5972f0f318876ac5b83416/d02c5/gatsby-netlify-twitterjpg_ok1k0q.webp 750w,\n/static/32d8216c2e5972f0f318876ac5b83416/d819f/gatsby-netlify-twitterjpg_ok1k0q.webp 1024w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5625}}}},"embeddedImageUrls":null,"fields":{"slug":"/posts/2020/11/gatsby-netlify-twitter/","owner":"source","parent":"posts"}}},"pageContext":{"id":"a3685e0b-9bdc-55bc-b97d-6d7ef31522bd","prev":{"frontmatter":{"title":"Silly Site Challenge","status":null},"fields":{"slug":"/posts/2020/11/silly-site-challenge/"}},"next":{"frontmatter":{"title":"Storybook - An alternative approach","status":null},"fields":{"slug":"/posts/2020/10/storybook-an-alternative-approach/"}},"parent":"posts"}},"staticQueryHashes":["1095393795","1469902088","2504239491","3642847879","571831435"]}
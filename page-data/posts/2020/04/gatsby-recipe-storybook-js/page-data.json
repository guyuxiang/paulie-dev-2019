{"componentChunkName":"component---node-modules-pauliescanlon-gatsby-theme-terminal-src-layouts-source-layout-js","path":"/posts/2020/04/gatsby-recipe-storybook-js/","result":{"data":{"mdx":{"id":"4a615253-321c-5d6b-870e-0c387ccca375","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"gatsby-recipe-storybook-js\",\n  \"tags\": [\"Gatsby\", \"Gatsby Recipes\", \"Storybook\", \"JavaScript\"],\n  \"date\": \"2020-04-26T00:00:00.000Z\",\n  \"dateModified\": \"2020-05-08T00:00:00.000Z\",\n  \"author\": \"Paul Scanlon\",\n  \"featuredImageUrl\": \"https://res.cloudinary.com/www-paulie-dev/image/upload/v1595915580/paulie.dev/2020/04/gatsby-recipe-storybook-js_ealp2r.jpg\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Divider = makeShortcode(\"Divider\");\nvar Box = makeShortcode(\"Box\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"If you haven't tried Gatsby Recipes yet you really should!\"), mdx(\"p\", null, \"You can read a bit more about them \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.org/blog/2020-04-15-announcing-gatsby-recipes/\"\n  }), \"here\"), \" which\\nwill give you a better overview of how they work, but to summarize here's a quote from Gatsby founder\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.org/contributors/kyle-mathews/\"\n  }), \"Kyle Mathews\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Gatsby Recipes, a new tool to automate common site building tasks.\")), mdx(\"p\", null, \"To use recipes you must upgrade to the latest version of the Gatsby CLI\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"npm install -g gatsby-cli@latest\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"You can then use a recipe by running something similar to the below in your CLI\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"gatsby recipes url-to-recipe/name-of-recipe.mdx\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"h2\", null, \"The Storybook Problem\"), mdx(\"p\", null, \"The problem in a nutshell is that Gatsby does a few things when you run either \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby develop\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby build\"), \" that\\nStorybook by default does not.\"), mdx(\"p\", null, \"To get the two playing nicely together we need a custom webpack config and it's precisely tasks like this where Gatsby\\nRecipes can do the lions share of the work so you don't have to! \\uD83E\\uDD81\"), mdx(\"p\", null, \"For instance, if you have any components that contain either a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<Link />\"), \" imported from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby\"), \" or any GraphQL queries\\nyou'll likely see an error not to dissimilar to this \\uD83D\\uDC47\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"ERROR in ../node_modules/gatsby/cache-dir/gatsby-browser-entry.js 25:4\\nModule parse failed: Unexpected token (25:4)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|\\n|   return (\\n>     <React.Fragment>\\n|       {finalData && render(finalData)}\\n|       {!finalData && <div>Loading (StaticQuery)</div>}\\n\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The first reason we get this error is because Gatsby exports as ES6 and Storybook by default expects all code to be\\nES5 / CommonJs.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The second reason is that the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"gatsby develop\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"gatsby build\"), \" steps remove GraphQL queries, Storybook by default\\ndoes not.\")), mdx(\"p\", null, \"So that's the issue, but what can we do about fixing it?\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"h2\", null, \"The solution\"), mdx(\"p\", null, \"Storybook allows us to write our own webpack config and there's some docs on that\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://storybook.js.org/docs/configurations/custom-webpack-config/\"\n  }), \"here\"), \" but in short we need to push a new rule to\\nthe Storybook webpack config that will mimic the Gatsby build steps.\"), mdx(\"p\", null, \"This new rule will do the following things.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Match all \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"js|jsx\"), \" file extensions\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Transpile all ES6 code found within them to ES5 / CommonJs\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Strip out any GraphQL queries\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Add the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"react-docgen\"), \" plugin (not essential but i like prop documentation)\")), mdx(\"p\", null, \"This doesn't sound like a huge job but if you're scared of Webpack like i am it's nice to be able to automate this step\\nso you can just get on and develop your UI.\"), mdx(\"p\", null, \"So that's why i created this recipe.\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"h2\", null, \"The recipe\"), mdx(\"p\", null, \"The complete steps of my recipe are as follows:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Install babel plugins and presets\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Install babel-plugin-react-docgen\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Install Storybook React NPM packages and addons\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Create custom Storybook webpack config (main.js) for \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"js|jsx\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Configure Storybook / Gatsby Link settings (preview.js)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Create example Link stories\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Add Storybook npm scripts to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"package.json\"))), mdx(\"p\", null, mdx(\"del\", {\n    parentName: \"p\"\n  }, \"You can test out my recipe \", mdx(\"strong\", {\n    parentName: \"del\"\n  }, \"gatsby-recipe-storybook-js\"), \" by running the following in your CLI\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(Box, {\n    sx: {\n      backgroundColor: \"surface\",\n      color: \"success\",\n      px: 3,\n      py: 1,\n      fontSize: \"14px\",\n      fontFamily: \"body\"\n    },\n    mdxType: \"Box\"\n  }, mdx(\"p\", null, mdx(\"del\", {\n    parentName: \"p\"\n  }, \"gatsby recipes\\n\", mdx(\"a\", _extends({\n    parentName: \"del\"\n  }, {\n    \"href\": \"https://raw.githubusercontent.com/PaulieScanlon/gatsby-recipe-storybook-js/master/gatsby-recipe-storybook-js.mdx\"\n  }), \"https://raw.githubusercontent.com/PaulieScanlon/gatsby-recipe-storybook-js/master/gatsby-recipe-storybook-js.mdx\")))), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"h2\", null, \"\\uD83D\\uDEA8 Update:\"), mdx(\"p\", null, \"This recipe is now part of the official Gatsby CLI \\uD83C\\uDF89 You can test it out by running the following in your CLI \\uD83D\\uDC47\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \" gatsby recipes storybook-js.mdx\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"The repo can be found here on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/PaulieScanlon/gatsby-recipe-storybook-js\"\n  }), \"GitHub\"), \" and if you're\\ninterested in the Webpack config you can find that here in\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/PaulieScanlon/gatsby-recipe-storybook-js/blob/master/recipe/main.js\"\n  }), \"main.js\")), mdx(\"p\", null, \"Oh and before i forget, make sure you've run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby develop\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby build\"), \" \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"before\"), \" you start Storybook, because we\\nneed the relevant GraphQL data to exist before we run Storybook.\"), mdx(\"p\", null, \"There's also a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"TypeScript\"), \" flavor of this recipe, you can read about that here\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/posts/2020/05/gatsby-recipe-storybook-ts/\"\n  }), \"gatsby-recipe-storybook-ts\")), mdx(\"p\", null, \"Lemme know how you get on! \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/PaulieScanlon\"\n  }), \"@pauliescanlon\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"If you haven't tried Gatsby Recipes yet you really should! You can read a bit more about them  here  which\nwill give you a better overviewâ€¦","timeToRead":2,"wordCount":{"words":505},"slug":"2020/04/gatsby-recipe-storybook-js","frontmatter":{"title":"gatsby-recipe-storybook-js","tags":["Gatsby","Gatsby Recipes","Storybook","JavaScript"],"date":"2020-04-26T00:00:00.000Z","dateModified":"2020-05-08T00:00:00.000Z","author":"Paul Scanlon","status":null,"isPrivate":null,"url":null,"misc":null,"pinned":null,"featuredImage":null,"embeddedImages":null},"featuredImageUrl":{"url":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFB//EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAWF589NEFQf/xAAdEAACAgEFAAAAAAAAAAAAAAABBAADBQISFBU0/9oACAEBAAEFAmcjbUx3F4id+plZ4nm7jMV4f//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB8QAAIBAgcAAAAAAAAAAAAAAAECAAMQETNRYXFyof/aAAgBAQAGPwJ0VRgDvMtPYKjAAnSVe1l5M//EAB0QAAICAQUAAAAAAAAAAAAAAAABETHRIVFhsfD/2gAIAQEAAT8hc9QpbELsWQ8cDUUsWWnpgch5m5//2gAMAwEAAgADAAAAEATP/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QWf/EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPxDFf//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESFBMXGBsfD/2gAIAQEAAT8QpgDZLA6alSDgVfsQwXtbwRvqP9NHhMNXjVn7c//Z"},"images":{"fallback":{"src":"/static/2b91cffab5610f42542cca6fcd8acc13/59894/gatsby-recipe-storybook-js_ealp2r.jpg","srcSet":"/static/2b91cffab5610f42542cca6fcd8acc13/5de87/gatsby-recipe-storybook-js_ealp2r.jpg 750w,\n/static/2b91cffab5610f42542cca6fcd8acc13/a1c7d/gatsby-recipe-storybook-js_ealp2r.jpg 1080w,\n/static/2b91cffab5610f42542cca6fcd8acc13/3141f/gatsby-recipe-storybook-js_ealp2r.jpg 1366w,\n/static/2b91cffab5610f42542cca6fcd8acc13/59894/gatsby-recipe-storybook-js_ealp2r.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/2b91cffab5610f42542cca6fcd8acc13/5846e/gatsby-recipe-storybook-js_ealp2r.avif 750w,\n/static/2b91cffab5610f42542cca6fcd8acc13/92457/gatsby-recipe-storybook-js_ealp2r.avif 1080w,\n/static/2b91cffab5610f42542cca6fcd8acc13/64926/gatsby-recipe-storybook-js_ealp2r.avif 1366w,\n/static/2b91cffab5610f42542cca6fcd8acc13/0db38/gatsby-recipe-storybook-js_ealp2r.avif 1920w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/2b91cffab5610f42542cca6fcd8acc13/d02c5/gatsby-recipe-storybook-js_ealp2r.webp 750w,\n/static/2b91cffab5610f42542cca6fcd8acc13/a2563/gatsby-recipe-storybook-js_ealp2r.webp 1080w,\n/static/2b91cffab5610f42542cca6fcd8acc13/2933d/gatsby-recipe-storybook-js_ealp2r.webp 1366w,\n/static/2b91cffab5610f42542cca6fcd8acc13/9e479/gatsby-recipe-storybook-js_ealp2r.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5625}}}},"embeddedImageUrls":null,"fields":{"slug":"/posts/2020/04/gatsby-recipe-storybook-js/","owner":"source","parent":"posts"}}},"pageContext":{"id":"4a615253-321c-5d6b-870e-0c387ccca375","prev":{"frontmatter":{"title":"gatsby-recipe-storybook-ts","status":null},"fields":{"slug":"/posts/2020/05/gatsby-recipe-storybook-ts/"}},"next":{"frontmatter":{"title":"TypeScript Theme UI Link","status":null},"fields":{"slug":"/posts/2020/04/typescript-theme-ui-link/"}},"parent":"posts"}},"staticQueryHashes":["1095393795","1469902088","2504239491","3642847879","571831435"]}
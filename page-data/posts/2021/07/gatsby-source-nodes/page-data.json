{"componentChunkName":"component---node-modules-pauliescanlon-gatsby-theme-terminal-src-layouts-source-layout-js","path":"/posts/2021/07/gatsby-source-nodes/","result":{"data":{"mdx":{"id":"be4ad7a3-4470-572b-a327-765134434643","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Add data to Gatsby's GraphQL layer using sourceNodes\",\n  \"tags\": [\"React\", \"Gatsby\", \"JavaScript\"],\n  \"date\": \"2021-07-01T00:00:00.000Z\",\n  \"author\": \"Paul Scanlon\",\n  \"featuredImageUrl\": \"https://res.cloudinary.com/www-paulie-dev/image/upload/v1625139192/paulie.dev/2021/07/gatsby-source-nodes_tqvkta.jpg\",\n  \"embeddedImageUrls\": [\"https://res.cloudinary.com/www-paulie-dev/image/upload/v1625137563/paulie.dev/2021/07/graphiql_hqbsvq.jpg\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Divider = makeShortcode(\"Divider\");\nvar GatsbyImage = makeShortcode(\"GatsbyImage\");\nvar YouTube = makeShortcode(\"YouTube\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In this post i'm going to demonstrate how to source data from a NASA API and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"inject\"), \" the response into Gatsby's GraphQL\\nlayer without the use of a source plugin.\"), mdx(\"p\", null, \"All Gatsby source plugins will use the same approach as outlined below and if you find yourself in a situation where\\nthere's no suitable source plugin available to install you could use the following approach to roll your own solution.\"), mdx(\"p\", null, \"If you'd prefer to jump ahead here's a demo repo:\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/PaulieScanlon/nasa-data-source\"\n  }), \"https://github.com/PaulieScanlon/nasa-data-source\")), mdx(\"p\", null, \"... and a live demo can be seen here: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://nasadatasource.gatsbyjs.io/\"\n  }), \"https://nasadatasource.gatsbyjs.io/\")), mdx(\"h2\", null, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#sourceNodes\"\n  }), \"sourceNodes\")), mdx(\"p\", null, \"To source data from a remote source and add it to Gatsby's data layer you can use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sourceNodes\"), \" extension point from\\nwithin \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-node.js\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sourceNodes\"), \" has been designed to run at an appropriate time during the build process to allow you to inject your own\\ndata.\"), mdx(\"p\", null, \"Here's a brief list of the Gatsby's build steps, the full list can be seen here:\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.com/docs/conceptual/overview-of-the-gatsby-build-process/#understanding-gatsby-build-build-time\"\n  }), \"Understanding Gatsby build | build steps\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"NB: There are some subtle differences between the build steps when running gatsby develop vs gatsby build\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"success open and validate gatsby-configs - 0.062 s\\nsuccess load plugins - 0.915 s\\nsuccess onPreInit - 0.021 s\\nsuccess delete html and css files from previous builds - 0.030 s\\nsuccess initialize cache - 0.034 s\\nsuccess copy gatsby files - 0.099 s\\nsuccess onPreBootstrap - 0.034 s\\nsuccess source and transform nodes - 0.121 s\\nsuccess Add explicit types - 0.025 s\\nsuccess Add inferred types - 0.144 s\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"You'll see near the bottom of the snippet: \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"success source and transform nodes\"), \". It's here where you can source your\\nown data and make it available to query via GraphQL by using\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.com/docs/reference/config-files/actions/#createNode\"\n  }), \"createNode\"), \", more on that in a moment.\"), mdx(\"p\", null, \"It's also worth noting next to each build step is a timestamp in seconds. You'll see next to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"success source and\\ntransform nodes\"), \" it says \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"0.121 s\"), \", naturally this varies slightly depending on which version of Node you're running\\nand i've heard tells that Windows runs Node slower than Mac. \\uD83E\\uDD37\\u200D\\u2642\\uFE0F\"), mdx(\"p\", null, \"But... the most important thing I'd like to make clear here is when you source your own data during this build step\\ndepending on the response time of the API you're requesting data from and the amount of data you're sourcing can have an\\nimpact on this time.\"), mdx(\"p\", null, \"If you're attempting to download a million 4k videos from a remote server on the moon this build step will likely take\\nmuch longer to complete. You've probably seen comments on Twitter regarding slow Gatsby build times, these comments\\nseldom mention how much data is being sourced, and from where.\"), mdx(\"h2\", null, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#source-plugins\"\n  }), \"Source Plugins\")), mdx(\"p\", null, \"As great as source plugins are, you might find yourself experiencing some of these slow build time issues but because\\nyou're using a source plugin it might be hard to resolve them since you don't have access to Gatsby's underlying\\nmethods.\"), mdx(\"p\", null, \"My motivation for writing this post is for precisely this reason. You might not need a plugin and by rolling your own\\nsolution it's quite likely you can source a smaller data payload which could help bring your build times back up to\\nspeed.\"), mdx(\"h2\", null, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#pre-flight-checks\"\n  }), \"Pre-Flight Checks\")), mdx(\"p\", null, \"To use the NASA API you'll need an API key, you can get that from NASA's API Site:\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://api.nasa.gov\"\n  }), \"https://api.nasa.gov\")), mdx(\"p\", null, \"You'll also need a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-node.js\"), \" at the root of you project:\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"...\\nsrc\\ngatsby-node.js\\npackage.json\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"And finally since I'll be requesting data on the server rather than in browser I'll be using\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/axios/axios\"\n  }), \"axios\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"yarn add axios # npm install axios --save\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"h2\", null, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#the-code\"\n  }), \"The Code\")), mdx(\"p\", null, \"Ok, with all of the above in place add the below to your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-node.js\"), \" file. You'll need to add your own API to the\\nrequest string.\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"// gatsby-node.js\\n\\nconst axios = require('axios')\\n\\nexports.sourceNodes = async ({ actions, createNodeId, createContentDigest }) => {\\n  const { data } = await axios.get(`https://api.nasa.gov/planetary/apod?api_key=YOUR_API_KEY`)\\n\\n  actions.createNode({\\n    ...data,\\n    id: createNodeId(data.date),\\n    internal: {\\n      type: 'apod',\\n      contentDigest: createContentDigest(data),\\n    },\\n  })\\n}\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"Starting at the top I define and export \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sourceNodes\"), \". sourceNodes can be an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"async\"), \" function and accepts a number\\nparameters including but not limited to the following.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"actions\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"createNodeId\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"createContentDigest\")), mdx(\"h4\", null, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#actions\"\n  }), \"actions\")), mdx(\"p\", null, \"I've refereed to Gatsby's data layer a number of times and at the time of writing this post, This is actually Redux.\\nActions are the equivalent to actions bound with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://redux.js.org/api/bindactioncreators/\"\n  }), \"bindActionCreators\"), \" in\\nRedux. One of the parameters. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"actions\"), \" contains a function called\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.com/docs/reference/config-files/actions/#createNode\"\n  }), \"createNode\"), \" and this is how you add data to\\nthe Redux state object / Gatsby's data layer\"), mdx(\"h4\", null, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#createNodeId\"\n  }), \"createNodeId\")), mdx(\"p\", null, \"This is effectively a helper function that aids in the creation of unique id's. Under the hood Gatsby are using\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/uuid\"\n  }), \"uuid\"), \", you can of course use your preferred method but since uuid is already part\\nof the Gatsby bundle it makes sense to use it.\"), mdx(\"h4\", null, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#createContentDigest\"\n  }), \"createContentDigest\")), mdx(\"p\", null, \"This again is a helper function provided by Gatsby that allows for the creation of a content digest.\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.com/docs/reference/config-files/node-api-helpers/#createContentDigest\"\n  }), \"createContentDigest\"), \" is\\nused to determine if data has changed or has remained the same since the last build.\"), mdx(\"h4\", null, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#actions-createNode\"\n  }), \"actions.createNode\")), mdx(\"p\", null, \"To create a node there's a few things Gatsby requires, and below is the absolute minimum set of parameters you'll need.\\nThe full list of accepted parameters can be seen in the\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.com/docs/reference/config-files/actions/#createNode\"\n  }), \"docs\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"// gatsby-node.js // snippet from above\\nactions.createNode({\\n  ...data,\\n  id: createNodeId(data.date),\\n  internal: {\\n    type: 'apod',\\n    contentDigest: createContentDigest(data),\\n  },\\n})\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"h4\", null, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#data\"\n  }), \"data\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"...data\"), \" is the data returned by the NASA API. It's a single object rather than an array of objects. I spread this\\nstraight into my new node, you can of course abstract the response and only inject the data you need.\"), mdx(\"h4\", null, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#id\"\n  }), \"id\")), mdx(\"p\", null, \"Every node needs an id, i'm not 100% clear on why, but id's are usually required to ensure data is uniquely identifiable\"), mdx(\"h4\", null, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#internal-type\"\n  }), \"internal.type\")), mdx(\"p\", null, \"This is where you can define a type. In the above i've defined this as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"apod\"), \". APOD is the NASA API endpoint i'm using\\nand stands for Astronomy Picture of the Day. This internal type is what you'll use later when querying the data using\\nGraphQL.\"), mdx(\"h4\", null, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#internal-contentDigest\"\n  }), \"internal.contentDigest\")), mdx(\"p\", null, \"As above, each node requires a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"contentDigest\"), \" to enable stale node detection\"), mdx(\"h2\", null, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#run-develop\"\n  }), \"Run develop\")), mdx(\"p\", null, \"At this point you should be able to run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby develop\"), \", if there's no errors you're in a good place.\"), mdx(\"h2\", null, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#graphiql\"\n  }), \"GraphiQL\")), mdx(\"p\", null, \"With the node created you should be able to see the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"apod\"), \" type in the GraphiQL explorer. Visit\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8000/___graphql\"\n  }), \"http://localhost:8000/\", \"_\", \"_\", \"_\", \"graphql\"), \" to investigate. If you've used the APOD API as\\ni've done the accepted query types are as follows.\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(GatsbyImage, {\n    alt: \" \",\n    image: props.embedded.image1,\n    mdxType: \"GatsbyImage\"\n  }), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"You'll notice i'm using the singular \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"apod\"), \" query name. Gatsby will create two queries for you, the singular as seen\\nbelow but also a plural, prefixed by \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"all\"), \", E.g \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"allApod\"), \". As mentioned above the data returned by the NASA API is an\\nobject rather than an array of objects.\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"{\\n  apod {\\n    id\\n    date\\n    explanation\\n    media_type\\n    service_version\\n    title\\n    url\\n  }\\n}\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"Which should give you a response similar to the below\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"{\\n  \\\"data\\\": {\\n    \\\"apod\\\": {\\n      \\\"id\\\": \\\"bbfeddbe-d2d7-5ce9-8962-35a779b7acb1\\\",\\n      \\\"date\\\": \\\"2021-07-01\\\",\\n      \\\"explanation\\\": \\\"On sol 46 (April 6, 2021) the Perseverance rover held out a robotic arm to take its first selfie on Mars. The WATSON camera at the end of the arm was designed to take close-ups of martian rocks and surface details though, and not a quick snap shot of friends and smiling faces. In the end, teamwork and weeks of planning on Mars time was required to program a complex series of exposures and camera motions to include Perseverance and its surroundings. The resulting 62 frames were composed into a detailed mosiac, one of the most complicated Mars rover selfies ever taken. In this version of the selfie, the rover's Mastcam-Z and SuperCam instruments are looking toward WATSON and the end of the rover's outstretched arm. About 4 meters (13 feet) from Perseverance is a robotic companion, the Mars Ingenuity helicopter.\\\",\\n      \\\"media_type\\\": \\\"image\\\",\\n      \\\"service_version\\\": \\\"v1\\\",\\n      \\\"title\\\": \\\"Perseverance Selfie with Ingenuity\\\",\\n      \\\"url\\\": \\\"https://apod.nasa.gov/apod/image/2107/PIA24542_fig2_1100c.jpg\\\"\\n    }\\n  }\\n}\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"This confirms that the node was created successfully and can be queried by GraphQL in your React component or page.\"), mdx(\"h2\", null, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#jsx\"\n  }), \"Jsx\")), mdx(\"p\", null, \"My preferred method for querying non page queries in Gatsby is to use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useStaticQuery\"), \". Here's a query that i've used in\\nthe \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/PaulieScanlon/nasa-data-source/blob/main/src/pages/index.js\"\n  }), \"index.js\"), \" and I return it using\\nsome simple un-styled HTML\"), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"// index.js\\n\\nimport React from 'react'\\nimport { useStaticQuery, graphql } from 'gatsby'\\n\\nconst IndexPage = () => {\\n  const {\\n    apod: { id, date, explanation, media_type, service_version, title, url },\\n  } = useStaticQuery(graphql`\\n    query {\\n      apod {\\n        id\\n        date\\n        explanation\\n        media_type\\n        service_version\\n        title\\n        url\\n      }\\n    }\\n  `)\\n\\n  return (\\n    <main>\\n      <p>{date}</p>\\n      <h1>{title}</h1>\\n      <p>{explanation}</p>\\n      <img alt={title} src={url} />\\n      <p>{`id: ${id}`}</p>\\n      <p>{`media_type: ${media_type}`}</p>\\n      <p>{`service_version: ${service_version}`}</p>\\n    </main>\\n  )\\n}\\n\\nexport default IndexPage\\n\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"... and there you have it, data sourcing without plugins! I've used this approach many times in various projects and\\ncovered it quite conclusively with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/raae\"\n  }), \"Benedicte Raae\"), \" on our pokey internet show\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.youtube.com/playlist?list=PL9W-8hhRoLoN7axEFJQ17rJvk2KTiM2GP\"\n  }), \"Gatsby Deep Dives with Queen Raae and the Nattermobs Pirates\")), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(YouTube, {\n    youTubeId: \"tJHV96jVlKg\",\n    mdxType: \"YouTube\"\n  }), mdx(Divider, {\n    mdxType: \"Divider\"\n  }), mdx(\"p\", null, \"Stay tuned for the next post where i'll explain how to convert the image url GraphQL type from \\\"string\\\" to \\\"file\\\" using\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.com/docs/reference/config-files/gatsby-node/#createSchemaCustomization\"\n  }), \"createSchemaCustomization\"), \"\\nso it can be used with the new and improved \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.com/plugins/gatsby-plugin-image/\"\n  }), \"gatsby-plugin-image\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"In this post i'm going to demonstrate how to source data from a NASA API and  inject  the response into Gatsby's GraphQL\nlayer without the…","timeToRead":4,"wordCount":{"words":1096},"slug":"2021/07/gatsby-source-nodes","frontmatter":{"title":"Add data to Gatsby's GraphQL layer using sourceNodes","tags":["React","Gatsby","JavaScript"],"date":"2021-07-01T00:00:00.000Z","dateModified":null,"author":"Paul Scanlon","status":null,"isPrivate":null,"url":null,"misc":null,"pinned":null,"featuredImage":null,"embeddedImages":null},"featuredImageUrl":{"url":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABQADBv/EABUBAQEAAAAAAAAAAAAAAAAAAAQC/9oADAMBAAIQAxAAAAHnFS2mD2jqVf/EABoQAAEFAQAAAAAAAAAAAAAAAAIAAQMEEjH/2gAIAQEAAQUCGLTVq46KvE6g7xGRa//EABgRAAIDAAAAAAAAAAAAAAAAAAIDEBES/9oACAEDAQE/ASbkqj//xAAXEQADAQAAAAAAAAAAAAAAAAAAARES/9oACAECAQE/AZUZP//EAB8QAAECBgMAAAAAAAAAAAAAAAEAEQIQEiEiMVFhcf/aAAgBAQAGPwIERDzhZXTtT1Pa/8QAGRABAAMBAQAAAAAAAAAAAAAAAQARMSFh/9oACAEBAAE/IStA7DWHkiIrU1Ehg0s5HaT/2gAMAwEAAgADAAAAECcP/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAwEBPxBjRyHTb//EABgRAAIDAAAAAAAAAAAAAAAAAAABESFR/9oACAECAQE/EFaJaf/EABsQAQEBAAIDAAAAAAAAAAAAAAERACExUWGR/9oACAEBAAE/EF2F6H6Zq7AFLF9cmAXQWqcuEBgscxrU7MpVmed//9k="},"images":{"fallback":{"src":"/static/53b5dc65139b21106da039bc23687e7e/ccd19/gatsby-source-nodes_tqvkta.jpg","srcSet":"/static/53b5dc65139b21106da039bc23687e7e/5de87/gatsby-source-nodes_tqvkta.jpg 750w,\n/static/53b5dc65139b21106da039bc23687e7e/ccd19/gatsby-source-nodes_tqvkta.jpg 1024w","sizes":"100vw"},"sources":[{"srcSet":"/static/53b5dc65139b21106da039bc23687e7e/5846e/gatsby-source-nodes_tqvkta.avif 750w,\n/static/53b5dc65139b21106da039bc23687e7e/47b7d/gatsby-source-nodes_tqvkta.avif 1024w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/53b5dc65139b21106da039bc23687e7e/d02c5/gatsby-source-nodes_tqvkta.webp 750w,\n/static/53b5dc65139b21106da039bc23687e7e/d819f/gatsby-source-nodes_tqvkta.webp 1024w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5625}}}},"embeddedImageUrls":[{"url":[{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwb/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHsVSMyg//EABcQAAMBAAAAAAAAAAAAAAAAAAABEBH/2gAIAQEAAQUCGjI5/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAERIRAxUf/aAAgBAQABPyFKUiqqJdI1l//aAAwDAQACAAMAAAAQA/8A/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8QV//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAAICAgMAAAAAAAAAAAAAAAERACEQQVFhkf/aAAgBAQABPxADN7jgqT4nT8lEBIUCheP/2Q=="},"images":{"fallback":{"src":"/static/2daf3e5e248897835b5dddfda6502856/32f37/graphiql_hqbsvq.jpg","srcSet":"/static/2daf3e5e248897835b5dddfda6502856/cfc78/graphiql_hqbsvq.jpg 750w,\n/static/2daf3e5e248897835b5dddfda6502856/b61c7/graphiql_hqbsvq.jpg 1080w,\n/static/2daf3e5e248897835b5dddfda6502856/2a7de/graphiql_hqbsvq.jpg 1366w,\n/static/2daf3e5e248897835b5dddfda6502856/32f37/graphiql_hqbsvq.jpg 1440w","sizes":"100vw"},"sources":[{"srcSet":"/static/2daf3e5e248897835b5dddfda6502856/14b75/graphiql_hqbsvq.avif 750w,\n/static/2daf3e5e248897835b5dddfda6502856/a6a73/graphiql_hqbsvq.avif 1080w,\n/static/2daf3e5e248897835b5dddfda6502856/239a9/graphiql_hqbsvq.avif 1366w,\n/static/2daf3e5e248897835b5dddfda6502856/d41e5/graphiql_hqbsvq.avif 1440w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/2daf3e5e248897835b5dddfda6502856/50de2/graphiql_hqbsvq.webp 750w,\n/static/2daf3e5e248897835b5dddfda6502856/e6933/graphiql_hqbsvq.webp 1080w,\n/static/2daf3e5e248897835b5dddfda6502856/a62ef/graphiql_hqbsvq.webp 1366w,\n/static/2daf3e5e248897835b5dddfda6502856/b5a29/graphiql_hqbsvq.webp 1440w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.625}}}]}],"fields":{"slug":"/posts/2021/07/gatsby-source-nodes/","owner":"source","parent":"posts"}}},"pageContext":{"id":"be4ad7a3-4470-572b-a327-765134434643","prev":{"frontmatter":{"title":"Modify Gatsby's GraphQL data types using createSchemaCustomization","status":null},"fields":{"slug":"/posts/2021/07/gatsby-create-schema-customization/"}},"next":{"frontmatter":{"title":"Using Gatsby Functions as an abstracted API","status":null},"fields":{"slug":"/posts/2021/06/gatsby-abstracted-functions/"}},"parent":"posts"}},"staticQueryHashes":["1095393795","1469902088","2504239491","3642847879","571831435"]}